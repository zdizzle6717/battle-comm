/*
HTML5 Data Bindings
Version: 1.9.0
(c) 2016 DMXzone.com
@build 2016-02-05 14:09:00
*/
!function(a,b,c,d){function e(b){return"object"==typeof b?!a.isEmptyObject(b):!!b}function f(b){if(null==b||"object"!=typeof b)return b;var c=a.isArray(b)?[]:{};for(var d in b)b.hasOwnProperty(d)&&(c[d]=f(b[d]));return c}function g(a,b){function c(a){var b=0;for(var c in a)a.hasOwnProperty(c)&&b++;return b}if(typeof a!=typeof b)return!1;if("function"==typeof a)return a.toString()===b.toString();if(a instanceof Object&&b instanceof Object){if(c(a)!=c(b))return!1;for(var d in a)if(!g(a[d],b[d]))return!1;return!0}return a===b}function h(a,b,c,d){return b=b||F,a.replace(z,function(e,f){if("@"==f[0])return"{{"+f.slice(1)+"}}";var g=v(f,b);return c&&b.watch(f,function(){C.run(c,null,h(a,b),a)},d),null==g?"":g})}function i(a){return a.replace(/^\{\{@?|\}\}$/g,"")}function j(a){return encodeURIComponent(a)}function k(a){return decodeURIComponent(a.replace(/\+/g," "))}function l(a){for(var b={},c=/([^&=]+)=?([^&]*)/g;m=c.exec(a);)b[k(m[1])]=k(m[2]);return b}function n(b,d){var e=history&&history.pushState,f=c.location,g=l(e?f.search.substr(1):f.hash.substr(2));null==d?delete g[b]:g[b]=d,e?history.pushState(null,null,"?"+a.param(g)):f.hash="?"+a.param(g),a.dmxDataBindings.globalScope.update("$URL")}function o(a){n(a)}function p(a,b){F.add(a,b)}function q(a){F.get(a)}function r(a){F.remove(a)}function s(a,b){b instanceof Element&&(b=w.closest(b)),F.add(a,b.data)}function t(){function a(b,c){if("object"!=typeof b){b=b.split(" ");for(var e=0,f=b.length;f>e;e++)d[b[e]]||(d[b[e]]=[]),d[b[e]].push(c)}else for(var g in b)a(g,b[g])}function b(a){var b=Array.prototype.slice.call(arguments,1);a=a.split(" ");for(var c=0,e=a.length;e>c;c++)for(var f in d)if(a[c]==f||"*"==f.substr(f.length-1)&&0===a[c].indexOf(f.substr(0,f.length-1)))for(var g=0,h=d[f].length;h>g;g++)d[f][g].apply(null,b)}function c(a,b){a=a.split(" ");for(var c=0,e=a.length;e>c;c++)if(d[a[c]])if(b){for(var f=d[a[c]].length-1;f>=0;f--)if(d[a[c]][f]==b)return void d[a[c]].splice(f,1)}else delete d[a[c]]}var d={};return{add:a,exec:b,remove:c}}function u(a){function b(b){return b>1?a.substr(w,b):a[w]}function c(b){return b=b||1,w+b<a.length?a[w+b]:!1}function d(a){return-1!=a.indexOf(s)}function e(a){return'"'==a||"'"==a}function f(a){return a>="0"&&"9">=a}function g(a){return a>="a"&&"z">=a||a>="A"&&"Z">=a||"_"==a||"$"==a}function h(a){return g(a)||f(a)}function i(a){return" "==a||"\r"==a||"	"==a||"\n"==a||""==a||"Â "==a}function j(a){return"-"==a||"+"==a||f(a)}function k(c){var d="",e=!1;for(w++;w<a.length;){if(s=b(),e){if("u"==s){w++;var f=b(4);if(f.match(/[\da-f]{4}/i))throw Error("Invalid unicode escape");d+=String.fromCharCode(parseInt(f,16)),w+=3}else{var g=z[s];d+=g?g:s}e=!1}else if("\\"==s)e=!0;else{if(s==c)return w++,d;d+=s}w++}throw Error("Unterminated quote")}function l(){for(var e="",g=!1;w<a.length;){if(s=b(),d(".")&&c()&&f(c())||f(s))e+=s;else{var h=c();if(d("eE")&&j(h))e+="e",g=!0;else{if(!(j(s)&&h&&f(h)&&g)){if(!j(s)||h&&f(h)||!g)break;throw Error("Invalid exponent")}e+=s,g=!1}}w++}return+e}function m(){for(var c="";w<a.length&&(s=b(),h(s));)c+=s,w++;return c}function n(){var c="",d="",e=!1;for(w++;w<a.length;){if(s=b(),e)e=!1;else if("\\"==s)e=!0;else if("/"==s){for(w++;-1!="ign".indexOf(s=b());)d+=s,w++;return c+"%%%"+d}c+=s,w++}throw Error("Unterminated regexp")}function o(){var a=w,b=!0;try{n()}catch(c){b=!1}return w=a,s="/",b}for(var p,q,r,s,t,u,v=[],w=0,x=!0,y={"(":"L_PAREN",")":"R_PAREN","[":"L_BRACKET","]":"R_BRACKET",".":"PERIOD",",":"COMMA",":":"COLON","?":"QUESTION","+":"ADDICTIVE","-":"ADDICTIVE","*":"MULTIPLICATIVE","/":"MULTIPLICATIVE","%":"MULTIPLICATIVE","===":"EQUALITY","!==":"EQUALITY","==":"EQUALITY","!=":"EQUALITY","<":"RELATIONAL",">":"RELATIONAL","<=":"RELATIONAL",">=":"RELATIONAL","in":"RELATIONAL","&&":"LOGICAL_AND","||":"LOGICAL_OR","!":"LOGICAL_NOT","&":"BITWISE_AND","|":"BITWISE_OR","^":"BITWISE_XOR","~":"BITWISE_NOT","<<":"BITWISE_SHIFT",">>":"BITWISE_SHIFT",">>>":"BITWISE_SHIFT"},z={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'};w<a.length;){if(r=w,s=b(),e(s)&&x)q="STRING",p=k(s),x=!1;else if((f(s)||d(".")&&c()&&f(c()))&&x)q="NUMBER",p=l(),x=!1;else if(g(s)&&x)q="IDENT",p=m(),d("(")&&(q="METHOD"),x=!1;else if(d("/")&&x&&o())q="REGEXP",p=n(),x=!1;else{if(i(s)){w++;continue}if((u=b(3))&&y[u])q=y[u],p=u,x=!0,w+=3;else if((t=b(2))&&y[t])q=y[t],p=t,x=!0,w+=2;else{if(!y[s])throw Error("Lexer Error: Unexpected token '"+s+"' at column "+w+" in expression ["+a+"]");q=y[s],p=s,x=!0,w++}}v.push({name:q,index:r,value:p})}return v}function v(c,e){function g(){if(0===J.length)throw Error("Unexpected end of expression: "+c);return J[0]}function h(a){if(J.length>0){var b=J[0];if(!a||b.name==a)return b}return!1}function i(a){var b=h(a);return b?(J.shift(),b):!1}function j(a){if(!i(a))throw Error("Unexpected token, expecting ["+a+"]. expression: "+c)}function k(a){var b=Array.prototype.slice.call(arguments,1);return function(){return L.hasOwnProperty(a)?L[a].apply(e,b):a}}function l(){function a(){for(var a,c=0;c<b.length;c++){var d=b[c];d&&(a=d())}return a}for(var b=[];;)return J.length>0&&!h("R_PAREN")&&!h("R_BRACKET")&&b.push(m()),(1==b.length?b[0]:a)()}function m(){return n()}function n(){var a,b,c=o();if(b=i("QUESTION")){if(a=n(),b=i("COLON"))return k("?",c,a,n());throw Error("Parse Error")}return c}function o(){for(var a,b=p();;){if(!(a=i("LOGICAL_OR")))return b;b=k(a.value,b,p())}}function p(){var a,b=q();return(a=i("LOGICAL_AND"))&&(b=k(a.value,b,p())),b}function q(){var a,b=r();return(a=i("BITWISE_OR"))&&(b=k(a.value,b,r())),b}function r(){var a,b=s();return(a=i("BITWISE_XOR"))&&(b=k(a.value,b,s())),b}function s(){var a,b=t();return(a=i("BITWISE_AND"))&&(b=k(a.value,b,s())),b}function t(){var a,b=w();return(a=i("EQUALITY"))&&(b=k(a.value,b,t())),b}function w(){var a,b=x();return(a=i("RELATIONAL"))&&(b=k(a.value,b,w())),b}function x(){for(var a,b=y();a=i("BITWISE_SHIFT");)b=k(a.value,b,y());return b}function y(){for(var a,b=A();a=i("ADDICTIVE");)b=k(a.value,b,A());return b}function A(){for(var a,b=B();a=i("MULTIPLICATIVE");)b=k(a.value,b,B());return b}function B(){var a;return(a=i("ADDICTIVE"))?"+"==a.value?C():k(a.value,N,B()):(a=i("LOGICAL_NOT"))?k(a.value,B()):C()}function C(){var a,c;if(i("L_PAREN"))a=m(),j("R_PAREN");else if(i("L_BRACKET"))a=G(k(e.getData()));else if(i("PERIOD"))a=h()?H(k(e.getData())):k(e.getData());else{var f=i();if(f===!1)throw Error("Not a primary expression");a="IDENT"==f.name?M.hasOwnProperty(f.value)?M[f.value]:function(){return e.get(f.value)}:"METHOD"==f.name?k(K[f.value]||function(){return b.console&&console.warn("Formatter "+f.value+" doesn't exist"),d}):"REGEXP"==f.name?function(){var a=f.value.split("%%%");return new RegExp(a[0],a[1])}:function(){return f.value}}for(;c=i("L_PAREN")||i("L_BRACKET")||i("PERIOD");)if("("==c.value)a=E(a,I);else if("["==c.value)I=a,a=G(a);else{if("."!=c.value)throw Error("Parse Error");I=a,a=H(a)}return I=null,a}function E(b,c){var d=[];if("R_PAREN"!=g().name)do d.push(m());while(i("COMMA"));return j("R_PAREN"),function(){for(var e=[c()],f=0;f<d.length;f++)e.push(d[f]());var g=b()||a.noop;return g.apply(null,e)}}function G(a){var b=m();return j("R_BRACKET"),function(){var c=a(),e=b();return"object"!=typeof c?d:c[e]}}function H(a){var c=i();return function(){var e=a();return"METHOD"==c.name?K[c.value]||function(){return b.console&&console.warn("Formatter "+c.value+" doesn't exist"),d}:e&&e.hasOwnProperty(c.value)?e[c.value]:d}}if(e=e||F,"{{"==c.substr(0,2)&&"}}"==c.substr(-2)&&-1==c.indexOf("{{",2)&&(c=c.substring(2,c.length-2)),-1!=c.indexOf("{{"))return c.replace(z,function(a,b){if("@"==b.substr(0,1))return"{{"+b.slice(1)+"}}";var c=v(b,e);return null==c?"":c});var I,J=D[c]?D[c]:u(c),K=a.dmxDataBindings.filters,L={"in":function(a,b){return a()in b()},"?":function(a,b,c){return a()?b():c()},"+":function(a,b){return a=a(),b=b(),null==a?b:null==b?a:a+b},"-":function(a,b){return a()-b()},"*":function(a,b){return a()*b()},"/":function(a,b){return a()/b()},"%":function(a,b){return a()%b()},"===":function(a,b){return a()===b()},"!==":function(a,b){return a()!==b()},"==":function(a,b){return a()==b()},"!=":function(a,b){return a()!=b()},"<":function(a,b){return a()<b()},">":function(a,b){return a()>b()},"<=":function(a,b){return a()<=b()},">=":function(a,b){return a()>=b()},"&&":function(a,b){return a()&&b()},"||":function(a,b){return a()||b()},"&":function(a,b){return a()&b()},"|":function(a,b){return a()|b()},"^":function(a,b){return a()^b()},"<<":function(a,b){return a()<<b()},">>":function(a,b){return a()>>b()},">>>":function(a,b){return a()>>>b()},"~":function(a){return~a()},"!":function(a){return!a()}},M={PI:function(){return Math.PI},$this:function(){return e.getData()},$global:function(){return F.getData()},$parent:function(){return e.parentScope&&e.parentScope.getData()},"null":function(){return null},"true":function(){return!0},"false":function(){return!1}},N=function(){return 0};return D[c]=f(J),l()}function w(b){var c=this,e=t(),h={},j=[],k={},l={};this.parentScope=b,b&&b.hook("digest",function(a){c.digest(a)}),this.add=function(a,b){this.exists(a)&&g(l[a],b)||(l[a]=f(b),j.push(a),C.runOnce(this.digest,this))},this.create=function(b){var c=new w(this);return b&&a.data(b,"scope",c),c},this.destroy=function(){b&&b.unhook("digest",function(a){c.digest(a)})},this.digest=function(a){if(a||(a=[]),j=j.concat(a),0!==j.length){var b=new RegExp("(^|\\b)("+j.join("|").replace(/\$/g,"")+")(\\b|$)");for(var c in k)if(b.test(c)){var d=v(c,this);if(!g(k[c].value,E.test(c)?v(c.replace(E,"")):d)){for(var f=k[c].callbacks,h=0;h<f.length;h++)C.run(f[h].callback,null,d,k[c].value);k[c].value=d}}e.exec("digest",j),j=[]}},this.exists=function(a){return l&&a&&l.hasOwnProperty(a)},this.find=this.parse,this.get=function(a){return this.exists(a)?l[a]:this.parentScope?this.parentScope.get(a):d},this.getData=function(){return l},this.hook=e.add,this.parse=function(a){return v(a,this)},this.register=function(a,b,c){return h[a]=b,null!=c&&(l[a]=c),this},this.remove=function(a){delete l[a],j.push(a),C.runOnce(this.digest,this)},this.set=function(b){var c;for(c in l)j.push(c);for(c in b)j.push(c);l=a.isPlainObject(b)?f(b):{},C.runOnce(this.digest,this)},this.unhook=e.remove,this.unwatch=function(a,b){if(a=i(a).replace(E,""),k[a])for(var c=k[a].length-1;c>=0;c--)k[a][c].callback==b&&k[a].splice(c,1)},this.unwatchNS=function(a,b){if(a=i(a).replace(E,""),k[a])for(var c=k[a].length-1;c>=0;c--)k[a][c].namespace==b&&k[a].splice(c,1)},this.update=function(a){var b=h[a],c=Array.prototype.slice.call(arguments,1);return this.add(a,b.apply(l[a],c)),this},this.watch=function(a,b,c,d){if(a&&!/^(\{\{)?@/.test(a)){var e=v(a,this);k[a]=k[a]||{callbacks:[],value:E.test(a)?v(a.replace(E,"")):e},k[a].callbacks.push({callback:b,namespace:c}),d||C.runOnce(b,null,e)}}}function x(b,c){if("string"==typeof b)return h(b,c||F);if(a.isPlainObject(b)||a.isArray(b))for(var d in b)x(b[d],c);return b}function y(b){this.elm=b,this.$elm=a(b),this.children=[],this.defaultIndex=0,this.defaultPage=1,this.pageSize=-1,this.params={$selectedItem:null,$selectedIndex:-1,$currentPage:1,$totalPages:1,$totalItems:0},this.hooks=t(),this.$elm.data("repeater",this),C.run(this.init,this)}a.single=function(a){return function(b){return a[0]=b,a}}(a([1])),a.dmxDataBindings={};var z=/\{\{(.+?)\}\}/g,A=c.documentElement;Object.prototype.toString.apply;a.dmxDataBindings.$parseTemplate=h;var B={getItem:function(a){return k(c.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+j(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(a,b,d,e,f,g){if(!a||/^(?:expires|max\-age|path|domain|secure)$/i.test(a))return!1;var h="",i=new Date;if(d)switch(d.constructor){case Number:h=d===1/0?"; expires=Tue, 19 Jan 2038 03:14:07 GMT":"; expires="+i.setTime(i.getTime()+864e5*d).toUTCString();break;case String:h="; expires="+d;break;case Date:h="; expires="+d.toUTCString()}return c.cookie=j(a)+"="+j(b)+h+(f?"; domain="+f:"")+(e?"; path="+e:"")+(g?"; secure":""),C.runOnce(F.update,F,"$COOKIE"),!0},removeItem:function(a,b,d){return a&&this.hasItem(a)?(c.cookie=j(a)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(d?"; domain="+d:"")+(b?"; path="+b:""),!0):!1},hasItem:function(a){return new RegExp("(?:^|;\\s*)"+j(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(c.cookie)}};a.dmxDataBindings.setVariable=p,a.dmxDataBindings.getVariable=q,a.dmxDataBindings.removeVariable=r,a.dmxDataBindings.setScopeData=s,a.dmxDataBindings.setCookie=B.setItem,a.dmxDataBindings.removeCookie=B.removeItem,a.dmxDataBindings.setUrlParam=n,a.dmxDataBindings.removeUrlParam=o;var C=function(){var a=Array.prototype.slice,b={},c={clear:function(){for(var a in b)clearTimeout(a);b={}},exists:function(a){for(var c in b)if(b[c]==a)return!0;return!1},run:function(c,d){var e=a.call(arguments,2),f=setTimeout(function(){c.apply(d,e),delete b[f]},0);return b[f]=c,f},runNow:function(b,c){var d=a.call(arguments,2);return b.apply(c,d)},runOnce:function(b,d){var e=a.call(arguments);return c.exists(b)?!1:c.run.apply(d,e)}};return c}();a.dmxDataBindings.$lexer=u;var D={};a.dmxDataBindings.$parse=v;var E=/\.\s*randomize\s*\(\s*\)/g,F=new w;w.closest=function(b){for(var c;b;b=b.parentNode)if(c=a.data(b,"scope"))return c;return F},w.create=function(a){var b=w.closest(a).create(a);return b},w.destroy=function(b){var c=a.data(b,"scope");c&&c.destroy()},F.register("$URL",function(){var a=b.location,c=a.search.substr(1);return 0===a.hash.indexOf("#?")&&(c+="&"+a.hash.substr(2)),l(c)}).update("$URL"),F.register("$COOKIE",function(){for(var a,b={},d=/((?:^|\s*)[^;=]+)=?([^;]*)/g;a=d.exec(c.cookie);)b[k(a[1])]=k(a[2]);return b}).update("$COOKIE"),F.register("$FORM",function(){function b(a,b){for(var d={},f=0,g=a.length;g>f;f++)for(var h=a[f],i=c(h.name),j=d,k=0;k<i.length;k++){var l=i[k];j=e(j,l,j[l.key],h.value,b)}return d}function c(a){var b=[],c=a;if(!a)return{type:"object",key:c,last:!0};if(a=a.replace(/^([^\[]+)/,function(a,c){return b.push({type:"object",key:c}),""}),!a)return b[0].last=!0,b;for(;a;){if(!f.test(a))return{type:"object",key:c,last:!0};a=a.replace(f,function(a,c){return c?g.test(c)?(b.push({type:"array",key:+c}),""):(b.push({type:"object",key:c}),""):(b[b.length-1].append=!0,"")})}for(var d=0,e=b.length;e>d;d++){var h=b[d];e>d+1?h.nextType=b[d+1].type:h.last=!0}return b}function e(b,c,f,g,h){if(c.last){if(f===d)b[c.key]=c.append?[g]:g;else if(a.isArray(f))b[c.key].push(g);else{if(a.isPlainObject(f)&&!h)return e(f,{type:"object",key:"",last:!0},f[""],g,h);b[c.key]=[f,g]}return b}if(f===d)return b[c.key]="array"===c.nextType?[]:{};if(a.isPlainObject(f))return b[c.key];if(a.isArray(f)){if("array"===c.nextType)return f;for(var i={},j=0,k=f.length;k>j;j++)f[j]!==d&&(i[j]=f[j]);return b[c.key]=i}return b[c.key]={"":f}}var f=/^\[([^\]]*)\]/,g=/^\d+$/;return b(a(":input[name]").serializeArray())}),a(b).on("popstate hashchange",function(){F.update("$URL")}),a(c).on("change",function(){F.update("$FORM")}),a(c).ready(function(){F.update("$FORM")}),p("$loading",!1),p("$lasterror",d),a(c).ajaxStart(function(){p("$loading",!0)}).ajaxStop(function(){p("$loading",!1)}).ajaxError(function(a,b,c,d){var e=b.responseText,f=b.responseJSON;p("$lasterror",{code:b.status,status:d,message:e,data:f})}),a.ajaxPrefilter(function(a,b,c){x(a,a.scope),c.setRequestHeader("X-Requested-With","XMLHttpRequest")}),a.dmxDataBindings.filters={"default":function(a,b){return null==a?b:a},then:function(a,b,c){return e(a)?b:c},toNumber:function(a){return+a},toString:function(a){return a+""},parseJSON:function(b){return a.parseJSON(b)}};var G=function(){var a=t();return{ignore:{script:1,iframe:1},hook:a.add,unhook:a.remove,parse:function(b){var c=b&&b.tagName&&b.tagName.toLowerCase(),d={preventDefault:!1,parseAttributes:!0,parseChildren:!0,stop:!1};if(a.exec("start",b,d),!d.stop&&(a.exec("tag:"+c,b,d),!d.stop)){if(d.parseAttributes)for(var e,f=b.attributes.length;f--;)if(e=b.attributes[f],e&&e.specified){if(a.exec("attr:"+e.name,b,e,d),d.stop)return;d.preventDefault||G.parseAttribute(b,e),d.preventDefault=!1}if(c&&!G.ignore[c]&&d.parseChildren&&b.hasChildNodes()){var g;for(g=b.firstChild;g;g=g.nextSibling){switch(g.nodeType){case 1:G.parse(g);break;case 3:if(a.exec("text",b,g,d),d.stop)return;G.parseNode(b,g);break;case 8:a.exec("comment",b,g,d)}if(d.stop)return}}}},parseAttribute:function(a,b){var c=b.value,d=w.closest(a);-1!=c.indexOf("{{")&&(b.value=h(c,d,function(){b.value=h(c,d)}))},parseNode:function(a,b){var c=b.nodeValue,d=w.closest(a);-1!=c.indexOf("{{")&&(b.nodeValue=h(c,d,function(){b.nodeValue=h(c,d)}))}}}();G.hook({start:function(a,b){a.hasAttribute("data-binding-repeat")&&(new y(a),b.stop=!0)},text:function(b,c,d){if("textarea"==b.tagName.toLowerCase()){var e=c.nodeValue,f=w.closest(b);a.single(b).val(h(e,f,function(){a.single(b).val(h(e,f)).triggerHandler("render"),C.runOnce(F.update,F,"$FORM")})),d.stop=!0}},"attr:value":function(b,c){var d=c.value,e=w.closest(b);a.single(b).val(h(d,e,function(){a.single(b).val(h(d,e)).triggerHandler("render"),C.runOnce(F.update,F,"$FORM")}))},"attr:data-binding-repeat-children":function(a,b,c){new y(a),c.preventDefault=!0,c.parseChildren=!1},"attr:data-binding-repeat-index attr:data-binding-repeat-page attr:data-binding-repeat-size":function(a,b,c){c.preventDefault=!0},"attr:data-binding-scope":function(b,c){var d=w.closest(b),e=w.create(b);d.watch(c.value,a.proxy(e,"set"))},"attr:data-binding-detail":function(b,c){var d=w.create(b);d.parentScope.watch(c.value+".$selectedItem",a.proxy(d,"set"))},"attr:data-binding-html":function(b,c,d){w.closest(b).watch(c.value,function(c){a.single(b).html(c)}),b.removeAttribute(c.name),d.parseChildren=!1},"attr:data-binding-text":function(b,c,d){w.closest(b).watch(c.value,function(c){a.single(b).text(c)}),b.removeAttribute(c.name),d.parseChildren=!1},"attr:data-binding-selected":function(a,b){w.closest(a).watch(b.value,function(b){a.selected=e(b)}),a.removeAttribute(b.name)},"attr:data-binding-checked":function(a,b){w.closest(a).watch(b.value,function(b){a.checked=e(b)}),a.removeAttribute(b.name)},"attr:data-binding-disabled":function(a,b){w.closest(a).watch(b.value,function(b){a.disabled=e(b)}),a.removeAttribute(b.name)},"attr:data-binding-readonly":function(a,b){w.closest(a).watch(b.value,function(b){a.readOnly=e(b)}),a.removeAttribute(b.name)},"attr:data-binding-required":function(a,b){w.closest(a).watch(b.value,function(b){a.required=e(b)}),a.removeAttribute(b.name)},"attr:data-binding-value":function(b,c){var d=c.value,e=w.closest(b);e.watch(d,function(c){a.single(b).val(c).triggerHandler("render"),C.runOnce(F.update,F,"$FORM")}),a(b).on("repeatRender.dmxDataBindings",function(){a.single(this).val(v(d,e)).triggerHandler("render"),C.runOnce(F.update,F,"$FORM")}),b.removeAttribute(c.name)},"attr:data-binding-show":function(b,c){w.closest(b).watch(c.value,function(c){a(b).toggle(e(c))}),b.removeAttribute(c.name)},"attr:data-binding-hide":function(b,c){w.closest(b).watch(c.value,function(c){a(b).toggle(!e(c))}),b.removeAttribute(c.name)},"attr:data-binding-class-*":function(b,c){var d=c.name.substr(19);w.closest(b).watch(c.value,function(c){a(b).toggleClass(d,e(c))}),b.removeAttribute(c.name)},"attr:data-binding-style":function(b,c){function d(c){var d,e,f,g=c.split(";");for(d=0;d<g.length;d++)e=g[d],e&&(f=e.indexOf(":"),-1!=f&&a(b).css(e.substr(0,f),e.substr(f+1)))}var e=c.value,f=w.closest(b);d(h(e,f,function(){d(h(e,f))}))},"attr:data-binding-src attr:data-binding-href":function(b,c){var d=c.name.substr(13),e=c.value,f=w.closest(b);a(b).attr(d,h(e,f,function(){a(b).attr(d,h(e,f))})),b.removeAttribute(c.name)}}),a.dmxDataBindings.regions={};var H=0,I="Repeat",J="RepeatChildren",K="data-binding-repeat",L="data-binding-id",M=K+"-children",N=K+"-index",O=K+"-page",P=K+"-size";y.prototype={init:function(){var b=this;if(this.elm.hasAttribute(K))this.type=I,this.expression=i(this.$elm.attr(K)),this.elm.removeAttribute(K);else{if(!this.elm.hasAttribute(M))throw"Invalid Repeater Region";this.type=J,this.expression=i(this.$elm.attr(M)),this.elm.removeAttribute(M)}this.id=this.elm.hasAttribute(L)?this.$elm.attr(L):this.elm.id?this.elm.id:"Region"+ ++H,a.dmxDataBindings.regions[this.id]=this,this.$elm.is("select,option")&&(this.$select=this.$elm.closest("select"),this.$select.on("change",function(){var c=a("option:selected",this);c.length?b.select(c[0]):b.setSelectedIndex(-1)})),this.scope=w.closest(this.elm),this["setup"+this.type](),this.updateScopeProps(),this.elm.hasAttribute(N)&&(this.defaultIndex=this.$elm.attr(N),0===this.defaultIndex.indexOf("{{")&&this.scope.watch(this.defaultIndex,function(a){b.defaultIndex=null!=a?a:0,b.select(a)},"repeater:"+this.id),this.elm.removeAttribute(N)),this.elm.hasAttribute(O)&&(this.defaultPage=this.$elm.attr(O),0===this.defaultPage.indexOf("{{")&&this.scope.watch(this.defaultPage,function(a){b.defaultPage=null!=a?a:1,b.setPage(a)},"repeater:"+this.id),this.elm.removeAttribute(O)),this.elm.hasAttribute(P)&&(this.pageSize=this.$elm.attr(P),0===this.pageSize.indexOf("{{")&&this.scope.watch(this.pageSize,function(a){b.setPageSize(parseInt(a,10)||-1)},"repeater:"+this.id),this.pageSize=parseInt(this.pageSize,10)||-1,this.elm.removeAttribute(O)),a.each(["data","pageChanged","select","sort","beforeRender","afterRender"],function(a,c){var d=b.$elm.data("bindingRepeatOn"+c.toLowerCase());d&&b.hooks.add(c,function(){return new Function(d).call(),"undefined"!=typeof MM_returnValue&&null!==MM_returnValue?MM_returnValue:void 0})}),this.scope.watch(this.expression,a.proxy(this,"set"),"repeater:"+this.id)},updateScopeProps:function(){var a=this.scope;do a.add(this.id,this.params);while(a=a.parentScope)},set:function(b){var c,d=this;if("number"==typeof b){var e=b;for(b=[],c=0;e>c;c++)b.push(c)}if(null==b&&(b=[]),a.isArray(b)||a.isPlainObject(b)){this.children=[],c=0;for(var f in b)if(b.hasOwnProperty(f)){var g=b[f],h=a.extend(!0,{},g);h.$key=h.$name=f,h.$value=g,h.$index=c,h.$number=c+1,h.$oddeven=c%2,h.$selected=!1;var i=this.scope.create();i.set(h),this.children.push({data:h,node:null,scope:i}),c++}this.params.$selectedItem=null,this.params.$selectedIndex=-1,this.params.$totalItems=this.children.length,this.params.$totalPages=this.pageSize>0?Math.ceil(this.children.length/this.pageSize):1,this.hooks.exec("data",this),this["destroy"+this.type](),this.updateScopeProps(),this.render(),C.runOnce(function(){d.select(d.defaultIndex),d.setPage(d.defaultPage)})}},setPage:function(a){if(-1!==this.pageSize&&this.params.$totalItems){var b=this.params.$currentPage,c=this.params.$totalPages;if("string"==typeof a)switch(a){case"first":a=1;break;case"last":a=c;break;case"middle":a=Math.ceil(c/2);break;case"next":a=b+1;break;case"prev":a=b-1;break;case"random":a=Math.ceil(Math.random()*c);break;default:a=parseInt(a,10)}isNaN(a)&&(a=1),a=1>a?1:a>c?c:a,a!==this.params.$currentPage&&(this.params.$currentPage=a,this.hooks.exec("pageChanged",this),this.updateScopeProps(),this.render())}},setPageSize:function(a){a!=this.pageSize&&(this.pageSize=a,this.params.$totalPages=this.pageSize>0?Math.ceil(this.children.length/this.pageSize):1,this.params.$currentPage>this.params.$totalPages?this.setPage(this.params.$currentPage):(this.updateScopeProps(),this.render()))},setSelectedIndex:function(a){var b;if(this.params.$totalItems){a=parseInt(a,10),isNaN(a)&&(a=-1),-1!==this.params.$selectedIndex&&(b=this.getScope(this.params.$selectedIndex),b.add("$selected",!1));var c=this.params.$totalItems;-1!==a?(a=0>a?0:a>=c?c-1:a,b=this.getScope(a),b.add("$selected",!0),this.params.$selectedItem=b.getData()):this.params.$selectedItem=null,this.params.$selectedIndex=a,this.hooks.exec("select",this),this.updateScopeProps()}},select:function(a){if(this.params.$totalItems){var b=this.params.$selectedIndex,c=this.params.$totalItems;if("string"==typeof a)switch(a){case"none":a=-1;break;case"first":a=0;break;case"last":a=c-1;break;case"middle":a=Math.floor(c/2);break;case"next":a=b>=c-1?0:b+1;break;case"prev":a=0>=b?c-1:b-1;break;case"random":a=Math.floor(Math.random()*c);break;default:a=parseInt(a,10)}else"object"==typeof a&&(a.$index?a=a.$index:a instanceof Element&&(a=w.closest(a).get("$index")));(null==a||isNaN(a))&&(a=-1),this.setSelectedIndex(a)}},sort:function(a,b){if(this.params.$totalItems){this.children.sort(function(b,c){var d=(a?b.data[a]:b.data.$value)||"",e=(a?c.data[a]:c.data.$value)||"";return"string"==typeof d&&"string"==typeof e?d.localeCompare(e):e>d?-1:d>e?1:0}),b&&"DESC"===b.toUpperCase()&&this.children.reverse();for(var c=0,d=this.params.$totalItems;d>c;c++){var e=this.getScope(c);e.add("$index",c),e.add("$number",c+1),e.add("$oddeven",c%2),e.digest(),e.get("$selected")&&(this.params.$selectedIndex=c)}this.hooks.exec("sort",this),this.render()}},getChild:function(a){return this.children[a].node||(this.children[a].node=this["create"+this.type+"Node"](this.getScope(a))),this.children[a].node},getScope:function(a){return this.children[a].scope},render:function(){var a=this;this.hooks.exec("beforeRender",this),this["clear"+this.type]().then(function(){if(a.params.$totalItems){var b=0,c=a.params.$totalItems;a.pageSize>0&&(b=(a.params.$currentPage-1)*a.pageSize,c=b+a.pageSize,c>a.params.$totalItems&&(c=a.params.$totalItems));for(var d=b;c>d;d++)a["render"+a.type](d);a.$select&&a.$select.trigger("repeatRender"),C.runOnce(F.update,F,"$FORM"),a.hooks.exec("afterRender",a)}})},setupRepeat:function(){this.startNode=c.createComment("START REPEAT"),this.endNode=c.createComment("END REPEAT"),this.template=a(this.elm).before(this.startNode).after(this.endNode).detach()},createRepeatNode:function(a){var b=this.template.clone(!0);return b.data("scope",a),G.parse(b[0]),b},renderRepeat:function(a){this.getChild(a).insertBefore(this.endNode)},destroyRepeat:function(){var b=this;this.clearRepeat().then(function(){a.each(b.children,function(){this.scope.destroy(),this.node&&this.node.remove()})})},clearRepeat:function(){for(var b,c=new jQuery.Deferred,d=this.startNode.nextSibling;d&&d!==this.endNode;)b=d.nextSibling,a.single(d).detach(),d=b;return c.resolve(),c.promise()},setupRepeatChildren:function(){this.template=a.single(this.elm).children().detach()},createRepeatChildrenNode:function(a){var b=this.template.clone(!0);return b.data("scope",a),b.each(function(){G.parse(this)}),b},renderRepeatChildren:function(a){this.getChild(a).appendTo(this.elm)},destroyRepeatChildren:function(){var b=this;this.clearRepeatChildren().then(function(){a.each(b.children,function(){this.scope.destroy(),this.node&&this.node.remove()})})},clearRepeatChildren:function(){var b=new jQuery.Deferred;return a.single(this.elm).children().detach(),b.resolve(),b.promise()}},a.dmxDataBindings.Scope=w,a.dmxDataBindings.RepeaterRegion=y,a.dmxDataBindings.globalScope=F,a.dmxDataBindings.renderer=G,a.dmxDataBindings.executer=C,a(c).ready(function(){G.parse(A)})}(jQuery,this,document);