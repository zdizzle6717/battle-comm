/*
 DMXzone Lightbox
 Version: 2.0.0
 (c) 2014 DMXzone.com
 @build 09-12-2014 14:18:54
*/
"undefined"==typeof DMX&&(DMX={});DMX.IS_POSITION_FIXED_SUPPORTED=function(){var h=document.body;if(document.createElement&&h&&h.appendChild&&h.removeChild){var l=document.createElement("div");if(!l.getBoundingClientRect)return null;l.innerHTML="x";l.style.cssText="position:fixed;top:100px;";h.appendChild(l);var g=h.style.height,p=h.scrollTop;h.style.height="3000px";h.scrollTop=500;var s=l.getBoundingClientRect().top;h.style.height=g;g=100===s||102===s;h.removeChild(l);h.scrollTop=p;return g}return null};
DMX.IE=function(){for(var h=3,l=document.createElement("div"),g=l.getElementsByTagName("i");l.innerHTML="\x3c!--[if gt IE "+ ++h+"]><i></i><![endif]--\x3e",g[0];);return 4<h?h:void 0}();
DMX.Lightbox=function(){function h(a,b){var c={};b=b.selector?b:jQuery(b);try{c=jQuery.extend({},c,b.metadata({single:"dmxLightbox"}));try{b.removeData("dmxLightbox");c=jQuery.extend({},c,b.metadata({single:"dmxLightbox",type:"attr",name:"rev"}));try{b.removeData("dmxLightbox"),c=jQuery.extend({},c,b.metadata({single:"dmxLightbox",type:"attr",name:"target"}))}catch(e){}}catch(f){}}catch(d){}b.data("dmxLightbox",c);return c}function l(a){var b,c="url",e;do{if("string"==typeof a)try{var f=jQuery(a);
if(f.size&&0<f.length){a=f;b="jquery";break}}catch(d){b="url";c=g(a);break}a.selector?b="jquery":a.nodeName&&(b="node")}while(0);"node"==b&&(a=jQuery(a),b="jquery");switch(b){case "jquery":if(0===a.length)return DMX.log("No suitable items found for DMXzone Lightbox"),!1;e=a;break;case "url":e=jQuery('<a href="'+DMX.toAbsolutePath(a)+'" />')}if(!e||e.length&&0===e.length)return!1;e[0].href?c=g(e[0].href):e[0].src?c=g(e[0].src):e[0].data&&(c=g(e[0].data));return{items:e,plugin:c}}function g(a){return/\.(a?png|gif|jpe?g)(\?.*)?$/i.test(a)?
"image":/\.pdf(\?.*)?$/i.test(a)?"pdf":/\.swf(\?.*)?$/i.test(a)?"flash":/(\.flv|\.m4v|\.f4v|\.f4p|\.f4a|\.f4b)(\?.*)?$/i.test(a)?"flv":"url"}function p(a,b){this.options.title="";this.options.status="";this.options.width=null;this.options.height=null;this.options.plugin=null;this.options=this.getCurrentConfig(a);b=this.options.plugin||b||g(this.options.src);H(this,this.options,b)}function s(a,b,c){var e='The command "'+a+'" is not currently '+b+".",f="";!1!==c&&(e+="\n\tReason: "+c);arguments.callee&&
arguments.callee.caller&&arguments.callee.caller.caller&&(f=arguments.callee.caller.caller,f=f.name?f.name:String(f).substring(0,200)+" ...");f&&(e+="\n\tCaller: "+f);r(e)}function I(a){w(a);var b="resize.DMXLightbox";7>DMX.IE&&(b+=" scroll.DMXLightbox");"iPad"==navigator.platform&&(b=" orientationchange.DMXLightbox");jQuery(window).bind(b,function(b){a.fitToWindowTimeout&&window.clearTimeout(a.fitToWindowTimeout);a.fitToWindowTimeout=window.setTimeout(function(){window.DMX.Lightbox.instance&&window.DMX.Lightbox.instance.isOpened&&
window.DMX.Lightbox.instance.runCommand("resizeTo")},500)});DMX.IS_POSITION_FIXED_SUPPORTED()||("string"==typeof document.documentElement.style.WebkitTransform?a.wrapper.css({position:"absolute",height:window.innerHeight,"-webkit-transform":"translate(0,"+window.pageYOffset+"px)"}):a.wrapper.css({position:"absolute",top:window.pageYOffset,height:window.innerHeight}),a.wrapper.bind("touchmove",function(){event.preventDefault()}));a.options.closeOnOverlayClick&&a.wrapper.bind("click.DMXLightbox",function(){a.close()});
jQuery(".dmxLightboxContentsWrapper_rounded",a.wrapper).bind("click.DMXLightbox",function(){return!1}).bind("selectstart.DMXLightbox",function(){return!1}).hover(function(){1<a.items.length&&jQuery(this).find(".prevbtn, .nextbtn, .playbtn").show()},function(){a.metaData.canBeOverlaped&&jQuery(".prevbtn, .nextbtn, .playbtn",a.wrapper).hide()});DMX.IE&&document.documentMode&&8<=document.documentMode&&jQuery("#dmxLightboxContentsWrapper").bind("resize",function(b){jQuery(".dmxLightboxContentsWrapper_t, .dmxLightboxContentsWrapper_b",
a.wrapper).css({width:this.offsetWidth})});jQuery(".dmxLightboxContentsWrapper_closeButton",a.wrapper).css({cursor:"pointer"}).attr("title","Close").hover(function(){t(a,"hover")},function(){t(a)}).mousedown(function(b){a.close();return!1});a.wrapper.bind("selectstart",function(){return!1})}function w(a){a.wrapper=jQuery('<div id="dmxBoxWrapper" class="closed">  <table align="center" style="height:100%;">    <tr>      <td>        <div class="dmxLightboxContentsWrapper_rounded"></div>      </td>    </tr>  </table></div>');
var b=document.createElement("canvas"),c=document.createElement("canvas"),e=document.createElement("canvas"),f=document.createElement("canvas"),d=document.createElement("canvas");b.className="dmxLightboxContentsWrapper_tl";c.className="dmxLightboxContentsWrapper_tr";e.className="dmxLightboxContentsWrapper_bl";f.className="dmxLightboxContentsWrapper_br";d.className="dmxLightboxContentsWrapper_closeButton";jQuery('<div style="position:relative;zoom:1"/>').append(b).append(c).append(d).append('<div class="dmxLightboxContentsWrapper_t"/>').appendTo(jQuery(".dmxLightboxContentsWrapper_rounded",
a.wrapper));jQuery('<div class="dmxLightboxContentsWrapper_c"><div class="dmxLightboxContentsWrapper_progress" /><div class="dmxLightboxContentsWrapper_content" id="dmxLightboxContentsWrapper"></div></div>').appendTo(jQuery(".dmxLightboxContentsWrapper_rounded",a.wrapper));jQuery('<div style="position:relative;zoom:1"/>').append(e).append(f).append('<div class="dmxLightboxContentsWrapper_b"/>').appendTo(jQuery(".dmxLightboxContentsWrapper_rounded",a.wrapper));a.wrapper.prependTo("body");a.overlay=
jQuery('<div id="dmxLightboxOverlay"/>').css({opacity:0}).prependTo(a.wrapper);a.frame=jQuery('<iframe marginwidth="0" marginheight="0" src="about:blank"frameborder="0" hspace="0" vspace="0" scrolling="Auto" id="dmxLightboxContent" align="absmiddle"></iframe>').css({display:"block",width:64,height:10}).appendTo(jQuery(".dmxLightboxContentsWrapper_content",a.wrapper))}function u(a){a.wrapper.css({color:a.options.color||"#999"});var b=a.options,c=jQuery(".dmxLightboxContentsWrapper_rounded",a.wrapper),
e=b.radius+b.borderWidth+"px",f=b.radius+b.borderWidth;c.css({position:"absolute"==c.css("position")?"absolute":"relative",width:"auto",height:"auto",color:a.options.color||"#999",MozBorderRadius:e,WebkitBorderRadius:e,KhtmlBorderRadius:e,"border-radius":e});var e=jQuery(".dmxLightboxContentsWrapper_tl",c),d=jQuery(".dmxLightboxContentsWrapper_t",c),g=jQuery(".dmxLightboxContentsWrapper_tr",c);jQuery(".dmxLightboxContentsWrapper_l",c);jQuery(".dmxLightboxContentsWrapper_r",c);var n=jQuery(".dmxLightboxContentsWrapper_bl",
c),h=jQuery(".dmxLightboxContentsWrapper_b",c),k=jQuery(".dmxLightboxContentsWrapper_br",c),l=jQuery(".dmxLightboxContentsWrapper_c",c),m=jQuery(".dmxLightboxContentsWrapper_content",c),c=jQuery(".dmxLightboxContentsWrapper_closeButton",c);d.css({borderTop:b.borderWidth+"px solid "+b.borderColor,margin:"0 "+f+"px",height:b.radius,marginBottom:DMX.IE?Math.min(b.radius-1,0):0,backgroundColor:b.bgColor});e.css({height:f,width:f});g.css({height:f,width:f});n.css({height:f,width:f});k.css({height:f,width:f});
c.css({top:f-17,right:f-19});h.css({borderBottom:b.borderWidth+"px solid "+b.borderColor,margin:"0 "+(b.radius+b.borderWidth)+"px",top:DMX.IE?Math.min(b.radius,0):0,height:b.radius,backgroundColor:b.bgColor});l.css({borderWidth:"0 "+b.borderWidth+"px",borderColor:b.borderColor,paddingRight:b.radius,paddingLeft:b.radius,backgroundColor:b.bgColor});m.css({padding:b.padding,backgroundColor:b.paddingColor,borderWidth:b.innerBorderWidth,borderColor:b.innerBorderColor,borderStyle:b.innerBorderStyle});jQuery("a",
a.wrapper).css({color:b.color||"#999"});jQuery("#dmxLightboxContent",a.wrapper).css({backgroundColor:b.bgColor});a.overlay.css({backgroundColor:b.overlayColor,opacity:b.overlayOpacity,height:7>DMX.IE?a.wrapper.height():"100%"});a.Viewer&&a.Viewer.jQuery&&a.Viewer.jQuery("body").css({backgroundColor:b.bgColor})}function x(a){var b=a.options;if(b.showIndexButton&&1<a.items.length||b.showAboutButton||b.showPrefsButton){var c=jQuery("div.extraToolbar",a.wrapper);1>c.length?c=J(a):c.show();jQuery(".indexLink",
c)[b.showIndexButton&&1<a.items.length?"show":"hide"]();jQuery(".aboutLink",c)[b.showAboutButton?"show":"hide"]();jQuery(".prefsLink",c)[b.showPrefsButton?"show":"hide"]();var e=parseInt(c.outerHeight(),10);if(isNaN(e)||0===e)e=26;c.css({top:e>b.radius?b.radius+b.borderWidth:0})}else jQuery("div.extraToolbar",a.wrapper).hide();c=jQuery("span.bottomarea",a.wrapper);if(b.useStatusbar){1>c.length&&(c=y(a));var e=jQuery("div.bottomarea",a.wrapper),f=parseInt(e.outerHeight(),10);if(isNaN(f)||0===f)f=26;
e.css({top:f>b.radius?b.radius+b.borderWidth:0});c.show()}else c.hide();c=jQuery("div.toparea",a.wrapper).show();e=jQuery("span.toparea",c).show();f=parseInt(c.outerHeight(),10);if(isNaN(f)||0===f)f=26;c.css({bottom:f>b.radius?b.radius+b.borderWidth:0});e.css({display:b.useTitle?"inline":"none"});t(a);b=jQuery(".playbtn",a.wrapper);c=jQuery(".nextbtn",a.wrapper);e=jQuery(".prevbtn",a.wrapper);if(1<a.items.length){K(a);b.show();c.show();e.show();var f=a.options,d=jQuery("#dmxLightboxContent",a.wrapper),
g=Math.min(d.width(),d.height()),d=parseInt(b.outerHeight(),10);if(isNaN(d)||0===d)d=43;var n=parseInt(c.outerWidth(),10);if(isNaN(n)||0===n)n=42;var h=parseInt(e.outerWidth(),10);if(isNaN(h)||0===h)h=42;n=Math.max(n,h);a=g>2*n&&a.metaData.canBeOverlaped;c.css({right:n>f.radius-2&&a?f.radius+f.borderWidth+f.padding+6:n>f.radius-2?-1*n:Math.round((f.radius-n)/2)+f.borderWidth});e.css({left:n>f.radius-2&&a?f.radius+f.borderWidth+f.padding+6:n>f.radius-2?-1*n:Math.round((f.radius-n)/2)+f.borderWidth});
b.css({marginTop:d>f.radius-2&&a?-1*(f.radius+f.borderWidth+d+f.padding+6):n>f.radius-2?0:-1*Math.round((f.radius-d)/2+f.borderWidth+d)})}else b.hide(),c.hide(),e.hide()}function A(a){var b=a.options;b.dragable&&!a.dragable&&a.runCommand("makeDragable");!b.dragable&&a.dragable&&a.runCommand("makeUndragable");if(b.keyNavigation){a.runCommand("attachKeyEvents");try{window.focus()}catch(c){}}else a.runCommand("detachKeyEvents")}function B(a){var b=jQuery(a);DMX.IE&&!a.getContext&&(a=G_vmlCanvasManager.initElement(a));
var c=a.getContext("2d");c.mozImageSmoothingEnabled=!1;a.oldWidth&&a.oldHeight&&c.clearRect(0,0,a.oldWidth,a.oldHeight);a.oldWidth=b.width();a.oldHeight=b.height();b.attr("width",a.oldWidth);b.attr("height",a.oldHeight);return c}function m(a){return Math.PI/180*a}function t(a,b){var c=jQuery(".dmxLightboxContentsWrapper_closeButton",a.wrapper);if(a.options.showCloseButton){c.show();if("none"!=c.css("background-image"))return c;var e=a.options.borderColor,f=a.options.bgColor,d=B(c[0]);if(b&&"clear"==
b)d.clearRect(0,0,24,24);else return d.strokeStyle=e&&"rgba(0, 0, 0, 0)"!=e&&"transparent"!=e?e:"#FFF",d.fillStyle=f&&"rgba(0, 0, 0, 0)"!=f&&"transparent"!=f?f:"#F00",d.fillStyle==d.strokeStyle&&(d.fillStyle="#F00",d.strokeStyle="#FFF"),d.lineWidth=1,d.beginPath(),d.arc(12,12,10,m(0),m(360),1),d.stroke(),d.closePath(),d.lineWidth=2,b&&"hover"==b&&(e=d.fillStyle,d.fillStyle=d.strokeStyle,d.strokeStyle=e),d.beginPath(),d.arc(12,12,10,m(0),m(360),1),d.fill(),d.lineCap="square",d.moveTo(8,8),d.lineTo(16,
16),d.moveTo(8,16),d.lineTo(16,8),d.stroke(),d.closePath(),c}else c.hide()}function L(a){var b=a.options.radius,c=a.options.borderWidth,e=a.options.borderColor,f=a.options.bgColor;if(b||c){var d=jQuery(".dmxLightboxContentsWrapper_rounded",d);jQuery("canvas.dmxLightboxContentsWrapper_tl, canvas.dmxLightboxContentsWrapper_tr, canvas.dmxLightboxContentsWrapper_br, canvas.dmxLightboxContentsWrapper_bl, canvas.dmxLightboxContentsWrapper_t",d).each(function(){var a=c/2,d=B(this);d.strokeStyle=e;d.lineWidth=
c;d.fillStyle=f;switch(this.className){case "dmxLightboxContentsWrapper_tl":f&&"rgba(0, 0, 0, 0)"!=f&&"transparent"!=f&&0<b&&(d.beginPath(),d.moveTo(b+c,b+c),d.arc(b+c,b+c,b+a,m(280),m(170),!0),d.lineTo(b+c,b+c),d.lineTo(b+c,a),d.fill());c&&0<c&&(d.beginPath(),0>=b?d.strokeRect(a,a,c,c):(d.arc(b+c,b+c,b+a,m(280),m(170),!0),d.stroke()));break;case "dmxLightboxContentsWrapper_tr":f&&"rgba(0, 0, 0, 0)"!=f&&"transparent"!=f&&0<b&&(d.beginPath(),d.moveTo(0,b+c),d.arc(0,b+c,b+a,m(10),m(260),!0),d.lineTo(0,
b+c),d.lineTo(b+c,b+c),d.fill());c&&0<c&&(d.beginPath(),0>=b?d.strokeRect(0,b+a,c,c):(d.arc(0,b+c,b+a,m(10),m(260),!0),d.stroke()));break;case "dmxLightboxContentsWrapper_bl":f&&"rgba(0, 0, 0, 0)"!=f&&"transparent"!=f&&0<b&&(d.beginPath(),d.moveTo(b+c,0),d.arc(b+c,0,b+a,m(190),m(80),!0),d.lineTo(b+c,0),d.lineTo(0,b+c),d.fill());c&&0<c&&(d.beginPath(),0>=b?d.strokeRect(b+a,0,c,c):(d.arc(b+c,0,b+a,m(190),m(80),!0),d.stroke()));break;case "dmxLightboxContentsWrapper_br":f&&"rgba(0, 0, 0, 0)"!=f&&"transparent"!=
f&&0<b&&(d.beginPath(),d.moveTo(0,0),d.arc(0,0,b+a,m(100),m(350),!0),d.lineTo(0,0),d.lineTo(0,b),d.fill()),c&&0<c&&(d.beginPath(),0>=b?d.strokeRect(0,0,c,c):(d.arc(0,0,b+a,m(100),m(350),!0),d.stroke()))}})}}function K(a){var b=jQuery(".dmxLightboxContentsWrapper_rounded",a.wrapper);0===jQuery(".prevbtn, .nextbtn, .playbtn",b).length&&(b.append(jQuery('<a class="prevbtn" href="javascript:void(0);"/>').bind("mousedown.dmxBox",function(){return!1}).click(function(){a.goTo("prev");return!1}).hover(function(){jQuery(this).addClass("hover")},
function(){jQuery(this).removeClass("hover")})),b.append(jQuery('<a class="nextbtn" href="javascript:void(0);"/>').bind("mousedown.dmxBox",function(){return!1}).click(function(){a.goTo("next");return!1}).hover(function(){jQuery(this).addClass("hover")},function(){jQuery(this).removeClass("hover")})),b.append(jQuery('<a class="playbtn" href="javascript:void(0);"/>').bind("mousedown.dmxBox",function(){return!1}).click(function(){a.runCommand("toggleSlideshow");return!1}).hover(function(){jQuery(this).addClass("hover")},
function(){jQuery(this).removeClass("hover")})),7>DMX.IE&&!DMX.Lightbox.navButtonsIE6StyleApplied&&(b=DMX.getSiteRoot()+"dmx/widgets/Lightbox/styles/default/",document.createStyleSheet().cssText='#dmxBoxWrapper .nextbtn {background:none;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+b+'btn_next.png", sizingMethod="image");zoom:1;}#dmxBoxWrapper .nextbtn:hover, #dmxBoxWrapper .nextbtn.hover {background:none;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+b+'btn_next_hover.png", sizingMethod="image");zoom:1;}#dmxBoxWrapper .prevbtn {background:none;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+
b+'btn_prev.png", sizingMethod="image");zoom:1;}#dmxBoxWrapper .prevbtn:hover, #dmxBoxWrapper .prevbtn.hover {background:none;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+b+'btn_prev_hover.png", sizingMethod="image");zoom:1;}#dmxBoxWrapper .playbtn {background:none;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+b+'btn_play.png", sizingMethod="image");zoom:1;}#dmxBoxWrapper .playbtn:hover, #dmxBoxWrapper .playbtn.hover {background:none;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+
b+'btn_play_hover.png", sizingMethod="image");zoom:1;}#dmxBoxWrapper .playbtn.playing {background:none;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+b+'btn_pause.png", sizingMethod="image");zoom:1;}#dmxBoxWrapper .playbtn.playing:hover, #dmxBoxWrapper .playbtn.playing.hover {background:none;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+b+'btn_pause_hover.png", sizingMethod="image");zoom:1;}',DMX.Lightbox.navButtonsIE6StyleApplied=!0))}function C(a){var b=jQuery("div.toparea",
a.wrapper);0===b.length&&(jQuery('<div class="toparea"><span style="white-space:nowrap;" class="toparea">&nbsp;</span></div>').prependTo(jQuery(".dmxLightboxContentsWrapper_t",a.wrapper)),b=jQuery("span.toparea",a.wrapper).bind("selectstart.DMXLightbox",function(a){a.stopPropagation();return!1}));return b}function y(a){var b=jQuery(".bottomarea",a.wrapper);0===b.length&&(jQuery('<div class="bottomarea"><span style="white-space:nowrap;" class="bottomarea">&nbsp;</span></div>').prependTo(jQuery(".dmxLightboxContentsWrapper_b",
a.wrapper)),b=jQuery("span.bottomarea",a.wrapper));return b}function J(a){if(a.options.showPrefsButton||a.options.showAboutButton||!(2>a.items.length)){var b=jQuery(".extraToolbar",a.wrapper);if(0===b.length){var b=jQuery('<div class="extraToolbar" />'),c=jQuery('<a href="javascript:;" class="prefsLink" title="Preferences"/>').mousedown(function(){a.goTo("config");return!1}).hover(function(){jQuery(this).addClass("hover")},function(){jQuery(this).removeClass("hover")}),e=jQuery('<a href="javascript:;" class="indexLink" title="Index"/>').mousedown(function(){a.goTo("index");
return!1}).hover(function(){jQuery(this).addClass("hover")},function(){jQuery(this).removeClass("hover")}),f=jQuery('<a href="javascript:;" class="aboutLink" title="About"/>').mousedown(function(){a.goTo("about");return!1}).hover(function(){jQuery(this).addClass("hover")},function(){jQuery(this).removeClass("hover")});if(7>DMX.IE&&!DMX.Lightbox.AdditioanalToolbarIE6StyleApplied){var d=DMX.getSiteRoot()+"dmx/widgets/Lightbox/styles/default/";document.createStyleSheet().cssText='#dmxBoxWrapper .prefsLink {background:none;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+
d+'config_btn.png", sizingMethod="image");zoom:1;}#dmxBoxWrapper .prefsLink:hover, #dmxBoxWrapper .prefsLink.hover {background:none;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+d+'config_btn_hover.png", sizingMethod="image");zoom:1;}#dmxBoxWrapper .indexLink {background:none;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+d+'index_btn.png", sizingMethod="image");zoom:1;}#dmxBoxWrapper .indexLink:hover, #dmxBoxWrapper .indexLink.hover {background:none;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+
d+'index_btn_hover.png", sizingMethod="image");zoom:1;}#dmxBoxWrapper .aboutLink {background:none;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+d+'about_btn.png", sizingMethod="image");zoom:1;}#dmxBoxWrapper .aboutLink:hover, #dmxBoxWrapper .aboutLink.hover {background:none;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+d+'about_btn_hover.png", sizingMethod="image");zoom:1;}';DMX.Lightbox.AdditioanalToolbarIE6StyleApplied=!0}b.append(f).append(e).append(c).appendTo(jQuery(".dmxLightboxContentsWrapper_b",
a.wrapper))}return b}}function D(a,b,c){var e=jQuery(b),f=e.text();c=c?c:Math.max(a.options.titleMaxLength||100,10);if(c-3<f.length)f=f.substring(0,Math.floor(c/2)-3)+"..."+f.substring(f.length-Math.floor(c/2)),e.text(f);else for(c=f.length;e.width()>a.frame.width()-5&&3<c;)D(a,b,--c)}function M(a){a.slideShowTimeout&&window.clearTimeout(a.slideShowTimeout);a.isRunning=!0;a.slideShowTimeout=window.setTimeout(function(){a.goTo("next")},1E3*(a.options.pauseTime||5))}function N(a){a="url";var b=1,c=
0,e;for(e in DMX.Lightbox.plugins)c=DMX.Lightbox.plugins[e],(c=DMX.Lightbox.plugins[e].canHandleContent.call(c))&&c>b&&(b=c,a=e);return a}function E(a){a=String(a);if(v(DMX.Lightbox.plugins[a]))return DMX.Lightbox.plugins[a];try{DMX.include("/dmx/widgets/Lightbox/plugins/"+a+"/"+a+".js")}catch(b){r('Error loading plugin "'+a+'"')}return v(DMX.Lightbox.plugins[a])&&"function"==typeof DMX.Lightbox.plugins[a].invoke&&"function"==typeof DMX.Lightbox.plugins[a].canHandleContent?DMX.Lightbox.plugins[a]:
(r('The plugin "'+a+'" could not be loaded'),void 0!==DMX.Lightbox.plugins[a]&&delete DMX.Lightbox.plugins[a],!1)}function H(a,b,c){c=String(c||"");var e=null,f=!1;c&&(e=E(c),f=!0);if(!e){var d=c&&!e;c=N(a,b);d&&r('Plugin was set to "'+c+'"');e=E(c)}e&&0<(f?100:e.canHandleContent.call(e))&&z.add(function(){a.setMetaData({width:b.width||null,height:b.height||null,status:b.status||"",title:b.title||"",canBeOverlaped:!0,keepAspect:!1});b=jQuery.extend({},a.getCurrentConfig(b||{}),a.metaData);e.invoke.call(e,
b)})}function O(a){a=a.replace(/dmxnocache=\d+/,"");return a+=(/\?.+$/.test(a)?"&dmxnocache=":"?dmxnocache=")+(new Date).getTime()}function F(a,b,c){var e="";c?(e=new Date,e.setTime(e.getTime()+864E5*c),e="; expires="+e.toGMTString()):e="";document.cookie=a+"="+b+e+"; path=/"}function P(a){a+="=";for(var b=document.cookie.split(";"),c=0;c<b.length;c++){for(var e=b[c];" "==e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(a))return e.substring(a.length,e.length)}return null}function Q(){jQuery("select").each(function(){this.oldVisibility=
jQuery(this).css("visibility")||"";jQuery(this).css("visibility","hidden")})}function R(){jQuery("select").each(function(){this.oldVisibility&&(jQuery(this).css("visibility",this.oldVisibility),this.oldVisibility=null)})}function v(a){return a&&"object"==typeof a}function r(){if(DMX.Lightbox.instance.options.debugMode){var a=Array.prototype.slice.call(arguments);a.unshift("[Debug] ");DMX.log.apply({},a)}}function G(a){a=String(a);a=a.replace(/^.*[\/\\]/,"");return a=a.replace(/\?.*$/,"")}var q={hideTime:500,
showTime:500,slideTime:5E3,transitionTime:500,overlayColor:"#000",overlayOpacity:.75,radius:46,bgColor:"#000",borderWidth:4,borderColor:"#FFF",paddingColor:"#000",padding:1,bottomBarTopOffset:5,TopBarBottomOffset:5,titleMaxLength:"auto",dragable:!0,useTitle:!0,useStatusbar:!0,fixPNG:!0,noContextMenu:!0,noImageToolbar:!0,hideSelects:!0,keyNavigation:!0,minOffset:30,color:"#DDD",pauseTime:5,easing:"easeOutCirc",innerBorderWidth:3,innerBorderColor:"#333",innerBorderStyle:"double",cookieName:"dmxLightboxPrefs",
debugMode:!1,contentLoadTimeout:30,displayErrors:!0,showCloseButton:!0,showPrefsButton:!0,showIndexButton:!0,closeOnOverlayClick:!0,preset:"default",showAboutButton:!0,statusText:"Item {current} of {total}"};this.metaData={width:0,height:0,keepAspect:!1,title:"",status:"",canBeOverlaped:!0};this.options=jQuery.extend({},q);this.Viewer=null;this.dragable=this.isRunning=this.isOpened=!1;this.openEvent=null;this.version="2.0.0";this.getCurrentItem=function(){};this.getCurrentState=function(){var a={Viewer:this.Viewer,
isOpened:this.isOpened,isRunning:this.isRunning,groupName:this.groupName,items:this.items,currentItem:this.current,currentItemMetaData:jQuery(this.current).data("dmxLightbox")};this.options.debugMode&&(a.listeners=this.Observer.listenersList());return a};this.setViewer=function(a){"function"==typeof a.showContent&&(this.Viewer=a)};this.open=function(a,b,c,e,f){var d=this;a=jQuery.trim(String(a).toLowerCase());c=c||{};this.position=0;this.groupName="";this.items=jQuery();this.current=null;this.openEvent=
f;this.options.title="";this.options.status="";this.options.group="";var g=a;switch(a){case "jquery":if(0===b.length){r("No suitable items found for DMXzone Lightbox");return}this.items=b;break;case "url":this.items=jQuery('<a href="'+DMX.toAbsolutePath(b)+'" />');break;case "form":this.items=jQuery(b);break;case "node":this.items=jQuery(b);break;case "dom":this.items=jQuery(b);break;default:a=l(b);if(!a){DMX.log("No suitable items found for DMXzone Lightbox");return}this.items=a.items;g=g||a.plugin}this.current=
this.items[0];this.options=this.getCurrentConfig(c);if(this.groupName=this.options.group||"")a=jQuery("[rel='dmxLightbox'], [target='dmxLightbox']"),0>a.index(this.current)&&a.add(this.current),a=a.filter(function(a){a=h(d,this)||{};return!(!a.group||a.group!=d.groupName)}),a=jQuery.unique(a.get()),this.items=jQuery(a),this.position=this.items.index(this.current);d.isFirstTime=!1;this.isOpened||(this.wrapper||(d.isFirstTime=!0,I(this)),this.show(),jQuery(".dmxLightboxContentsWrapper_progress",d.wrapper).show(),
this.runCommand("setTitle","Loading"),jQuery("#dmxLightboxContent",this.wrapper).attr("src",O(DMX.getSiteRoot()+"dmx/widgets/Lightbox/frame.html")),this.isOpened=!0);this.runCommand("applyPreset",c.preset||this.getCurrentPresetName());this.options=this.getCurrentConfig(c);(d.isFirstTime||this.options.preset!=this.oldPrefs.preset)&&this.refresh();var k=0;(function(){d.Viewer?p.call(d,c,g):2E4>20*++k?window.setTimeout(arguments.callee,50):r("DMXzone Lightbox could not load content for 20 seconds")})();
this.addEventListener("contentLoaded.onOpen",function(){if(d.isFirstTime||!d.oldPrefs||d.options.preset!=d.oldPrefs.preset)u(d),d.oldPrefs=jQuery.extend({},d.options);d.isFirstTime&&x(d);A(d);"function"==typeof e&&e.call(d)},!0)};this.setMetaData=function(a){this.metaData=jQuery.extend({},this.metaData,a||{})};this.runCommand=function(a){var b=k[a];if(jQuery.isFunction(b)){if(DMX.Lightbox.instance.options.debugMode){var c=!0;if(jQuery.isFunction(b.available)&&(c=b.available(),!0!==c)){s(a,"available",
c);return}if(jQuery.isFunction(b.enabled)&&(c=b.enabled(),!0!==c)){s(a,"enabled",c);return}}return b.apply(this,Array.prototype.slice.call(arguments,1))}};var k={attachKeyEvents:function(){var a=this;this.runCommand("detachKeyEvents");jQuery(document).bind("keyup.dmxLightbox",function(b){var c=!0;switch(String(b.keyCode)){case "32":a.runCommand("toggleSlideshow");c=!1;break;case "39":case "38":1<a.items.length&&(a.goTo("next"),c=!1);break;case "37":case "40":1<a.items.length&&(a.goTo("prev"),c=!1);
break;case "27":a.close()}if(!c)return b.preventDefault(),!1}).bind("keydown.dmxLightbox keypress.dmxLightbox",function(a){var c=!0;switch(String(a.keyCode)){case "32":case "39":case "38":case "37":case "40":case "27":c=!1}if(!c)return a.preventDefault(),!1});window.focus()},detachKeyEvents:function(){jQuery(document).unbind("keyup.dmxLightbox keydown.dmxLightbox keypress.dmxLightbox")},resizeTo:function(a,b,c,e){function f(){g.isFirstTime=!1;g.wrapper.removeClass("animated");g.wrapper.removeClass("closed");
DMX.IE&&d.css({display:"inline-block"});x(g);"function"==typeof c&&c.call(this);g.dispatch("resizeEnd",{currentWidth:d.innerWidth(),currentHeight:d.innerHeight()})}DMX.IS_POSITION_FIXED_SUPPORTED()||("string"==typeof document.documentElement.style.WebkitTransform?this.wrapper.css({position:"absolute",height:window.innerHeight,"-webkit-transform":"translate(0,"+window.pageYOffset+"px)"}):this.wrapper.css({position:"absolute",top:window.pageYOffset,height:window.innerHeight}));var d=jQuery("#dmxLightboxContent",
this.wrapper);a=this.getComputedDimensions(a,b);this.lastRequestedWidth=a.x;this.lastRequestedHeight=a.y;if(d.width()==a.x&&d.height()==a.y)"function"==typeof c&&c.call(this),this.dispatch("resizeSkip"),r("One resize request was skiped");else{b=jQuery(".dmxLightboxContentsWrapper_rounded",this.wrapper).css({height:"auto",width:"auto",zoom:1});b.css("position");b.outerWidth();d.outerWidth();var g=this;this.dispatch("resizeStart",{currentWidth:d.innerWidth(),currentHeight:d.innerHeight(),requestedWidth:a.x,
requestedHeight:a.y});this.wrapper.addClass("animated");d.animate({height:a.y+"px",width:a.x+"px"},e?e:g.isFirstTime?g.options.showTime:g.options.transitionTime,g.options.easing,f)}},hideProgress:function(){var a=jQuery(".dmxLightboxContentsWrapper_progress",this.wrapper),b=a.data("showTimeout");b&&(window.clearTimeout(b),a.removeData("showTimeout"));a.hide()},showProgress:function(){var a=jQuery(".dmxLightboxContentsWrapper_progress",this.wrapper),b=a.data("showTimeout");b&&window.clearTimeout(b);
a.data("showTimeout",window.setTimeout(function(){a.show()},700))},setTitle:function(a){var b=jQuery("span.toparea",C(this));a=a||this.options.title||"";a=a.replace(/\{current\}/gi,this.position+1);a=a.replace(/\{total\}/gi,this.items.length);a=a.replace(/\{fileName\}/gi,G(this.options.src));this.options.title=a;b.text(a);b.data("originalTitle",a);this.options.useTitle&&(b.parent().show(),D(this,b))},setStatus:function(a){y(this);this.options.useStatusbar&&(a=a||this.options.statusText,a=a.replace(/\{current\}/gi,
this.position+1),a=a.replace(/\{total\}/gi,this.items.length),a=a.replace(/\{fileName\}/gi,G(this.options.src)),jQuery("span.bottomarea",y(this)).html(a||this.options.status||"&nbsp;"))},toggleSlideshow:function(){this.isRunning?this.runCommand("stopSlideshow"):this.runCommand("startSlideshow")},stopSlideshow:function(){this.slideShowTimeout&&window.clearTimeout(this.slideShowTimeout);jQuery(".playbtn",this.wrapper).removeClass("playing");this.removeEventListener("loaderFinished.dmxLightboxViewer");
this.removeEventListener("beforeClose.slideshowListener");this.isRunning=!1},startSlideshow:function(){this.isRunning=!0;var a=this;this.addEventListener("loaderFinished.dmxLightboxViewer",function(){M(a)});this.addEventListener("beforeClose.slideshowListener",function(){a.runCommand("stopSlideshow")});this.goTo("next");jQuery(".playbtn",this.wrapper).addClass("playing")},makeDragable:function(){function a(a){l&&(b(),k.wrapper.unbind("mousemove.dmxBoxDrag mouseup.dmxBoxDrag mouseleave.dmxBoxDrag mouseenter.dmxBoxDrag"),
d.css({width:"auto",height:"auto"}),m.hide(),k.wrapper.removeClass("animated"),jQuery(window).triggerHandler("resize.DMXLightbox"),l=!1)}function b(){h&&window.clearTimeout(h)}function c(c,e){k.wrapper.addClass("animated");d.css({position:"absolute",top:e,left:c,width:d.width(),height:d.height()});DMX.IE&&m.height(d.height());m.bind("mouseup.dmxBoxDrag",a).bind("mouseleave.dmxBoxDrag",function(){h=window.setTimeout(a,500)}).bind("mouseenter.dmxBoxDrag",b).show();l=!0}var e=0,f=0,d=jQuery(".dmxLightboxContentsWrapper_rounded",
this.wrapper).css({cursor:"move"}),g=d[0],h=null,k=this,l=!1,m=jQuery(".dmxBoxDragHelper",d);0===m.length&&(m=jQuery('<div class="dmxBoxDragHelper"/>').hide().appendTo(d),m.css({width:"100%",height:"100%",position:"absolute",zIndex:1E4,lineHeight:"1px",margin:0,padding:0,top:-20,left:-20,padding:"20px 20px"}),DMX.IE&&m.css({background:"#000",opacity:.01,zoom:1}));d.bind("mousedown.dmxBoxDrag",function(a){var b=d.offset();e=a.pageX-b.left;f=a.pageY-b.top;DMX.IE&&jQuery(".dmxLightboxContentsWrapper_t, .dmxLightboxContentsWrapper_b",
this.wrapper).each(function(){try{this.style.setExpression("width","eval(document.getElementById('dmxLightboxContentsWrapper').offsetWidth || 1)")}catch(a){}});k.wrapper.bind("mousemove.dmxBoxDrag",function(a){l?(g.style.top=a.clientY-f+"px",g.style.left=a.clientX-e+"px"):c(a.clientX-e,a.clientY-f)});return!1});k.dragable=!0},makeUndragable:function(){jQuery(".dmxLightboxContentsWrapper_rounded",this.wrapper).css({cursor:"",position:"relative",top:"auto",left:"auto",height:"auto"});this.wrapper.unbind("mousemove.dmxBox mouseup.dmxBoxDrag").find(".dmxLightboxContentsWrapper_rounded").unbind("mousedown.dmxBoxDrag mouseleave.dmxBoxDrag mouseenter.dmxBoxDrag").find(".dmxBoxDragHelper").unbind("mouseleave.dmxBoxDrag mouseenter.dmxBoxDrag mouseup.dmxBoxDrag");
DMX.IE&&jQuery(".dmxLightboxContentsWrapper_t, .dmxLightboxContentsWrapper_b",this.wrapper).each(function(){try{this.style.removeExpression("width"),jQuery(this).css("width","auto")}catch(a){}});jQuery(window).triggerHandler("resize.DMXLightbox");this.dragable=!1},applyPreset:function(a,b){this.options=jQuery.extend({},q,this.getPresetData(a),{preset:a});b&&F(q.cookieName,a,360);this.wrapper&&this.oldPrefs&&this.options.preset!=this.oldPrefs.preset&&this.refresh()},close:function(){this.close()},
rebuild:function(){this.refresh();A(this);this.runCommand("resizeTo")}};this.refresh=function(){u(this);L(this);x(this)};this.getTitle=function(){return jQuery("span.toparea",C(this)).data("originalTitle")||""};this.show=function(){7>DMX.IE&&this.options.hideSelects&&Q();jQuery("#dmxLightboxContent",this.wrapper).css({height:10,width:64});DMX.IS_POSITION_FIXED_SUPPORTED()||("string"==typeof document.documentElement.style.WebkitTransform?this.wrapper.css({position:"absolute",height:window.innerHeight,
"-webkit-transform":"translate(0,"+window.pageYOffset+"px)"}):this.wrapper.css({position:"absolute",top:window.pageYOffset,height:window.innerHeight}));this.wrapper.show()};this.hide=function(){var a=this;t(a,"clear");a.dragable&&a.runCommand("makeUndragable");jQuery("span.toparea").html("");this.runCommand("resizeTo",1,1,function(){var b=a.wrapper.find(".dmxLightboxContentsWrapper_rounded").css({display:"none",visibility:"hidden"});a.wrapper.fadeOut(300,function(){a.wrapper.addClass("closed");7>
DMX.IE&&R();jQuery(".dmxLightboxContentsWrapper_rounded, .dmxLightboxContentsWrapper_t, .dmxLightboxContentsWrapper_b",a.wrapper).css({width:"auto"});b.css({display:"block",visibility:""})});jQuery("#dmxLightboxContent",a.wrapper).attr("src","about:blank")},300)};this.close=function(){this.dispatch("beforeClose");this.runCommand("detachKeyEvents");this.runCommand("makeUndragable");z.abort();this.hide();this.isRunning=this.isOpened=!1;this.Viewer=null;this.items=[];this.dispatch("afterClose")};this.goTo=
function(a){var b=this.position,c=Number(b);switch(a){case "next":c++;break;case "prev":c--;break;case "config":this.isRunning&&this.runCommand("stopSlideshow");this.current={href:DMX.toAbsolutePath("/dmx/widgets/Lightbox/preferences.html?n="+(new Date).getTime())};p.call(this);return;case "index":this.isRunning&&this.runCommand("stopSlideshow");this.current={href:DMX.toAbsolutePath("/dmx/widgets/Lightbox/index.html?n="+(new Date).getTime())};p.call(this);return;case "about":this.isRunning&&this.runCommand("stopSlideshow");
this.current={href:DMX.toAbsolutePath("/dmx/widgets/Lightbox/about.html?n="+(new Date).getTime())};p.call(this);return;default:c=parseInt(a,10)}isNaN(c)||c==b||(0>c&&(c=this.items.length-1),c>this.items.length-1&&(c=0),this.current=this.items[c],this.position=this.items.index(this.current),p.call(this))};this.getAvailableSpaceForContent=function(){var a=this.options,b=jQuery(".dmxLightboxContentsWrapper_rounded",this.wrapper),c=jQuery(window).width(),e=jQuery(window).height(),f="absolute"==b.css("position"),
d=2*(a.radius+a.borderWidth+a.padding+a.innerBorderWidth+a.minOffset),g=c-d,d=e-d;f&&(g=Math.max(c-parseInt(b.css("left"),10)-a.minOffset-2*(a.radius+a.borderWidth+a.padding+a.innerBorderWidth),1),d=Math.max(e-parseInt(b.css("top"),10)-a.minOffset-2*(a.radius+a.borderWidth+a.padding+a.innerBorderWidth),1));return{width:g,height:d}};this.getComputedDimensions=function(a,b,c){jQuery("#dmxLightboxContent",this.wrapper);c=this.getAvailableSpaceForContent();var e=a||this.metaData.width,f=b||this.metaData.height;
this.metaData.keepAspect?(e>c.width&&(f=Math.ceil(f*c.width/e),e=c.width),f>c.height&&(e=Math.ceil(e*c.height/f),f=c.height)):(e=Math.min(a||this.metaData.width||this.lastRequestedWidth||300,c.width),f=Math.min(b||this.metaData.height||this.lastRequestedHeight||200,c.height));return{x:e,y:f}};this.Observer=new DMX.Observer;this.addEventListener=function(a,b,c){this.Observer.add(this,a,b,c)};this.releaseEvents=function(a){this.Observer.releaseEvents(a)};this.removeEventListener=function(a,b){this.Observer.remove(this,
a,b)};this.dispatch=function(a,b){this.Observer.notify(this,a,b)};this.getCurrentConfig=function(a){a=a||{};var b=jQuery.extend({},q,this.options),c={};if(this.current&&0<jQuery(this.current).length){var e=h(this,this.current)||{},c=jQuery.extend({},c,e);c.src=e.src||this.current.href||this.current.src||this.current.data||this.current.action||"";c.title=e.title||this.current.title||this.current.alt||this.options.title||decodeURIComponent(c.src)}return jQuery.extend({},b,c,a)};this.getCurrentPresetName=
function(){var a=h(this,this.current)||{};return String(a.preset||P(this.options.cookieName)||q.preset).replace(/(\.js)?$/,"")};this.getPresetData=function(a){a=a||this.getCurrentPresetName();v(DMX.Lightbox.presets[a])||(DMX.include("/dmx/widgets/Lightbox/presets/"+a+".js"),DMX.Lightbox.presets[a]="function"==typeof window.getDMXLightboxPreset?window.getDMXLightboxPreset():{});return DMX.Lightbox.presets[a]};this.getDefaults=function(){return jQuery.extend({},q)};this.config=function(a){if(a)if("string"==
typeof a)if("reset"==a)this.options={},F(q.cookieName,"",-1),this.options=jQuery.extend(this.options,q);else return this.options[a];else v(a)&&(this.options=jQuery.extend({},q,a));return this.options};var z=new function(a){var b=[],c=!1,e=!1,f=function(){c=!0;if(0<b.length){e=!1;var d=b.shift();a.addEventListener("loaderFinished.dmxLightboxViewer",function(){e=!0;a.dispatch("contentLoaded");f()},!0);var g=0;(function(){if(!e){var a=DMX.Lightbox.instance;a&&(++g>a.options.contentLoadTimeout?a.error():
setTimeout(arguments.callee,1E3))}})();d()}else c=!1};this.abort=function(){b.splice(0,b.length);e=!0;c=!1};this.add=function(a){b.push(a);c||f()}}(this);this.error=function(a){this.removeEventListener("loaderFinished.dmxLightboxViewer");a=a||this.errorMessage||"The content could not be loaded for "+this.options.contentLoadTimeout+" seconds.";this.errorMessage="";this.Viewer.cleanUp();this.Viewer.jQuery("body").html(this.options.displayErrors?'<span class="oldContent error">'+a+"</span>":'<span class="oldContent"></span>');
this.runCommand("hideProgress");this.runCommand("setTitle","Error");this.isRunning&&this.runCommand("stopSlideshow");this.runCommand("setStatus");this.setMetaData({width:250,height:100,keepAspect:!1});this.runCommand("resizeTo");this.dispatch("contentLoaded");DMX.log(a);z.abort()};DMX.Lightbox.instance=this;(function(a){k.attachKeyEvents.available=function(){return a.isOpened?!0:"Lightbox is not opened"};k.attachKeyEvents.enabled=function(){return a.options.keyNavigation?!0:"The keyNavigation option is off"};
k.detachKeyEvents.available=function(){return a.options.keyNavigation?!0:"The keyNavigation option is off"};k.detachKeyEvents.enabled=function(){return a.isOpened?!0:"Lightbox is not opened"};k.hideProgress.available=function(){return a.isOpened?!0:"Lightbox is not opened"};k.hideProgress.enabled=function(){return a.isOpened?!0:"Lightbox is not opened"};k.resizeTo.available=function(){return a.isOpened?!0:"Lightbox is not opened"};k.resizeTo.enabled=function(){return!0};k.showProgress.available=function(){return a.isOpened?
!0:"Lightbox is not opened"};k.showProgress.enabled=function(){return a.isOpened?!0:"Lightbox is not opened"};k.setTitle.available=function(){return!0};k.setTitle.enabled=function(){return!0};k.setStatus.available=function(){return a.isOpened?!0:"Lightbox is not opened"};k.setStatus.enabled=function(){return!0};k.toggleSlideshow.available=function(){return a.isOpened?!0:"Lightbox is not opened"};k.toggleSlideshow.enabled=function(){return 1<a.items.length?!0:"There is only one item"};k.stopSlideshow.available=
function(){return a.isOpened?!0:"Lightbox is not opened"};k.stopSlideshow.enabled=function(){return a.isRunning?!0:"The slideshow is not running"};k.startSlideshow.available=function(){return a.isOpened?!0:"Lightbox is not opened"};k.startSlideshow.enabled=function(){return a.isRunning?"The slideshow is allready running":1<a.items.length?!0:"There is only one item"};k.makeDragable.available=function(){return a.isOpened?!0:"Lightbox is not opened"};k.makeDragable.enabled=function(){return a.dragable?
"The Lightbox is currently dragable":!0};k.makeUndragable.available=function(){return a.isOpened?!0:"Lightbox is not opened"};k.makeUndragable.enabled=function(){return a.dragable?!0:"The Lightbox is currently undragable"};k.close.available=function(){return a.isOpened?!0:"Lightbox is not opened"};k.close.enabled=function(){return!0}})(this)};DMX.Lightbox.onCreateListeners=[];DMX.Lightbox.onCreate=function(h){"function"==typeof h&&DMX.Lightbox.onCreateListeners.push(h)};DMX.Lightbox.plugins={};
DMX.Lightbox.presets={};
DMX.Lightbox.create=function(h){function l(g){for(var h in g)return!1;return!0}if(DMX.Lightbox.instance){if("function"==typeof h&&h.call(DMX.Lightbox.instance),0<DMX.Lightbox.onCreateListeners.length){for(var g=0;g<DMX.Lightbox.onCreateListeners.length;g++)"function"==typeof DMX.Lightbox.onCreateListeners[g]&&DMX.Lightbox.onCreateListeners[g].call(DMX.Lightbox.instance);DMX.Lightbox.onCreateListeners=[]}}else{if(DMX.Lightbox.busy)return!1;DMX.Lightbox.busy=!0;"function"!=typeof jQuery.easing.easeOutCirc&&(jQuery.easing.easeOutCirc=
function(g,h,l,w,u){return w*Math.sqrt(1-(h=h/u-1)*h)+l});g=[];7>DMX.IE&&g.push("/dmx/widgets/Lightbox/styles/default/ie6.css");jQuery.metadata||g.push("/dmx/lib/jquery.metadata.pack.js");l(DMX.Lightbox.presets)&&g.push("/dmx/widgets/Lightbox/presets/all.js");DMX.loadFiles(g,function(){"function"==typeof getAllDMXLightboxPresets&&(DMX.Lightbox.presets=getAllDMXLightboxPresets());DMX.Lightbox.instance=new DMX.Lightbox;DMX.Lightbox.busy=!1;delete DMX.Lightbox.busy;"function"==typeof h&&h.call(DMX.Lightbox.instance)});
DMX.Lightbox.preloadImages()}};DMX.Lightbox.open=function(h,l,g,p,s){DMX.Lightbox.create(function(){this.isRunning&&this.runCommand("stopSlideshow");this.open(h,l,g,p,s)})};DMX.Lightbox.runCommand=function(){if(DMX.Lightbox.instance)return DMX.Lightbox.instance.runCommand.apply(DMX.Lightbox.instance,Array.prototype.slice.call(arguments));DMX.log("No Lightbox instance is currently available")};
DMX.Lightbox.preloadImages=function(){var h=["progress.gif"];7>DMX.IE&&h.push("btn_next_hover.png","btn_pause_hover.png","btn_play_hover.png","btn_prev_hover.png");for(var l=DMX.getSiteRoot()+"dmx/widgets/Lightbox/styles/default/",g=0;g<h.length;g++)(new Image).src=l+h[g]};jQuery.fn.dmxLightbox=function(h){return jQuery(this).unbind("click.DMXLightbox").bind("click.DMXLightbox",function(l){DMX.Lightbox.open("",this,h,null,l);return!1})};
jQuery.fn.dmxLightBoxForm=function(h){return jQuery(this).filter("form").each(function(){var l=this,g=l.onsubmit||function(){return!0};jQuery(l).data("originalOnsubmit",g);l.onsubmit=function(p){(/function[\w\s]*\(\s*this/.test(g)?g.call(this,this):g.call(this,p))&&DMX.Lightbox.open("form",this,h||{},function(){jQuery(l).trigger("submit")});return!1}})};
jQuery(function(){function h(g){for(var h in g)return!1;return!0}DMX.Lightbox.create(function(){jQuery("a[rel='dmxLightbox'], a[target='dmxLightbox']").dmxLightbox();for(var g=0;g<DMX.Lightbox.onCreateListeners.length;g++)"function"==typeof DMX.Lightbox.onCreateListeners[g]&&DMX.Lightbox.onCreateListeners[g].call(DMX.Lightbox.instance);DMX.Lightbox.onCreateListeners=[]});jQuery(window).load(function(){window.setTimeout(function(){jQuery("form[target='dmxLightbox']").dmxLightBoxForm()},1E3)});if("undefined"!=
typeof Spry&&Spry.Data&&Spry.Data.regionsArray){h(Spry.Data.regionsArray)&&Spry.Data.initRegions();for(var l in Spry.Data.regionsArray)Spry.Data.Region.addObserver(l,{onPostUpdate:function(g,h){jQuery("a[rel='dmxLightbox'], a[target='dmxLightbox']",h.regionNode).dmxLightbox()}})}jQuery.dmxDataBindings&&jQuery.dmxDataBindings.renderer.hook("attr:rel attr:target",function(g,h){"dmxLightbox"==h.value&&jQuery(g).dmxLightbox()})});
