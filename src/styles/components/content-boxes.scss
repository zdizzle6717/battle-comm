$space-between: 3;

.content-box-container {
	display: flex;
	flex-direction: row;
	flex-wrap: wrap;
	width: 90%;

	@for $i from 1 through 6 {
		.box-#{$i * 2} {
			width: 100%;
			display: flex;
			margin-bottom: 50px;
			float: left;
			// TODO: Fix this
			max-width: percentage(($i/6) - ($space-between * .01));
			flex-direction: column;
			box-sizing: border-box;
			@if $i < 6 {
				margin-left: percentage(.015);
				margin-right: percentage(.015);
			} @else {
				margin: 0 0 50px 0;
			}

			&:first-child {
				margin-left: 0px;
				max-width: percentage(($i/6) - ($space-between * .01)/2);
			}

			&:last-child {
				margin-right: 0px;
				max-width: percentage(($i/6) - .015);
			}

			&:first-child {
				&:last-child {
					max-width: 100%;
				}
			}

			@include breakpoint(small only) {
				max-width: 100%;
				margin-left: 0;
				margin-right: 0;

				&:first-child,
				&:last-child {
					max-width: 100%;
					margin: 0 0 34px 0;
				}
			}

			.box-top,
			.box-bottom {
				height: 24px;
				max-height: 24px;
				display: flex;
				flex-direction: row;
			}

			.box-top {
				.box-corner-tl,
				.box-corner-tr {
					height: 24px;
					width: 40px;
					z-index: 1;
				}

				.box-corner-tl {
					background: url('../images/contentBox/BC_Web_WindowUL.png') top left no-repeat;
				}

				.box-corner-tr {
					background: url('../images/contentBox/BC_Web_WindowUR.png') top right no-repeat;
				}

				.box-bar-top {
					position: relative;
					width: 100%;
    			margin: 0 -18px;

					.bar {
						position: absolute;
						background: url('../images/contentBox/BC_Web_WindowU.png') 0 repeat-x;
						width: 100%;
						height: 24px;
						top: 4px;

						.title {
							&.small {
								max-height: 92px;
								position: absolute;
								top: -1.75rem;
								left: 4%;
								max-width: 92%;
							}

							&.large {
								max-height: 97px;
    						position: absolute;
					    	top: -2.25rem;
					    	left: 4%;
							}
						}
					}
				}

			}

			.box-middle {
				display: flex;
				flex-direction: row;

				.box-bar-left,
				.box-bar-right {
	    		width: 20px;
					min-width: 20px;
				}

				.box-bar-left {
					background: url('../images/contentBox/BC_Web_WindowL.png') left repeat-y;
				}

				.box-bar-right {
					background: url('../images/contentBox/BC_Web_WindowR.png') right repeat-y;
				}

				.box-content {
					width: 100%;
					padding: 1.875rem 0 1rem 0;
					margin-left: -1px;
					margin-right: -1px;
					overflow: hidden;
					background: url('../images/contentBox/BC_App_9tile_C.png') top left repeat;
				}

			}

			.box-bottom {
				.box-corner-bl,
				.box-corner-br {
					height: 24px;
					width: 40px;
					z-index: 1;
				}

				.box-corner-bl {
					background: url('../images/contentBox/BC_Web_WindowBL.png') bottom left no-repeat;
				}

				.box-corner-br {
					background: url('../images/contentBox/BC_Web_WindowBR.png') bottom right no-repeat;
				}

				.box-bar-bottom {
					position: relative;
					width: 100%;
					margin: 0 -18px;

					.bar {
						position: absolute;
						background: url('../images/contentBox/BC_Web_WindowB.png') 0 repeat-x;
						width: 100%;
						height: 24px;
						bottom: 4px;
					}
				}

			}
		}
	}

}

@include breakpoint(medium down) {
	.content-box-container {
		width: 94%;

		@for $i from 1 through 6 {
			@if $i == 2 {
				.box-#{$i * 2} {
					max-width: 100%;
					margin-left: 0;
					margin-right: 0;

					&:first-child,
					&:last-child {
						max-width: 100%;
						margin: 0 0 34px 0;
					}
				}
			}
			@if $i == 4 {
				.box-#{$i * 2} {
					max-width: 100%;
					margin-left: 0;
					margin-right: 0;

					&:first-child,
					&:last-child {
						max-width: 100%;
						margin: 0 0 34px 0;
					}
				}
			}
		}
	}
}

@include breakpoint(small only) {
	.content-box-container {
		width: 96%;

		@for $i from 1 through 6 {
			.box-#{$i * 2} {
				max-width: 100%;
				margin-left: 0;
				margin-right: 0;

				&:first-child,
				&:last-child {
					max-width: 100%;
					margin: 0 0 34px 0;
				}
			}
		}
	}
}
